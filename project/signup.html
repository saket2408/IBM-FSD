<!DOCTYPE html>
<html lang="en">

<head>
	<title>QAEngine | Sign Up</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!--===============================================================================================-->
	<link href="img/qa.png" rel="icon">
	<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/bootstrap/css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="fonts/font-awesome-4.7.0/css/font-awesome.min.css">
	<link rel="stylesheet" type="text/css" href="vendor/animate/animate.css">
	<link rel="stylesheet" type="text/css" href="vendor/css-hamburgers/hamburgers.min.css">
	<link rel="stylesheet" type="text/css" href="vendor/animsition/css/animsition.min.css">
	<link rel="stylesheet" type="text/css" href="vendor/select2/select2.min.css">
	<link rel="stylesheet" type="text/css" href="vendor/daterangepicker/daterangepicker.css">
	<link rel="stylesheet" type="text/css" href="css/util.css">
	<link rel="stylesheet" type="text/css" href="css/main.css">
	<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,700,700i|Montserrat:300,400,500,700"
		rel="stylesheet">
	<link href="lib/bootstrap/css/bootstrap.min.css" rel="stylesheet">
	<link href="lib/font-awesome/css/font-awesome.min.css" rel="stylesheet">
	<link href="lib/animate/animate.min.css" rel="stylesheet">
	<link href="lib/ionicons/css/ionicons.min.css" rel="stylesheet">
	<link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">
	<link href="lib/lightbox/css/lightbox.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<link href="css/style.css" rel="stylesheet">
	<!--===============================================================================================-->

	<script type="text/javascript">

		function show() {
			if (localStorage.getItem("token") != null) {
				document.location = 'home.html'
			}

		}

		function validatepass(){
			let pass = document.getElementById('pass').value;
			let cpass = document.getElementById('cpass').value;
			if(pass == cpass){
				document.getElementById('message').innerText = "*password matched"
				document.getElementById('message').style.color = "green"
			}
			else{
				document.getElementById('message').innerText = "*password does not  match"
				document.getElementById('message').style.color = "red"
			}
		}

		function next(){
			let name = document.getElementById('name').value;
            let email = document.getElementById('email').value;
            let phone = document.getElementById('phone').value;
            let dob = document.getElementById('dob').value;
            var gender = document.getElementById('gender').value;
            var que = document.getElementById('que').value;
            var ans = document.getElementById('ans').value;
			let pass = document.getElementById('pass').value;
			let cpass = document.getElementById('cpass').value;
			if(name=="" || email.match(/^([a-zA-Z0-9_\-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([a-zA-Z0-9\-]+\.)+))([a-zA-Z]{1,5}|[0-9]{1,3})(\]?)$/) == null ||
			phone == "" || dob == "" || gender == "--Gender--" || que == "" || ans=="" ||
			pass.match(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/) == null || pass!=cpass){
				
			}else{
				document.getElementById('signup1').style.display = "none";
				document.getElementById('signup2').style.display = "block";
		}
	}


  function signup(){
			let name = document.getElementById('name').value;
            let email = document.getElementById('email').value;
            let phone = document.getElementById('phone').value;
            let dob = document.getElementById('dob').value;
            var gender = document.getElementById('gender').value;
            var que = document.getElementById('que').value;
            var ans = document.getElementById('ans').value;
			let pass = document.getElementById('pass').value;
			let cpass = document.getElementById('cpass').value;
			let _check = document.getElementsByName('_check');
			let food =[];
			_check.forEach(e=>{
				if(e.checked){
					food.push(e.value);
				}
			});
			let _travel = document.getElementsByName('_travel');
			let travel =[];
			_travel.forEach(e=>{
				if(e.checked){
					travel.push(e.value);
				}
			});
			const url_ = 'http://localhost:1234/user/register';
            fetch(url_, {
                    method: 'POST',
                    headers: {
                        'content-type': 'application/json'
                    },
                    body: JSON.stringify({
                        name: name,
						email: email,
						phone: phone,
                        password: pass,
                        dob: dob,
                        gender: gender,
                        que: que,
						ans: ans,
						food : food,
						travel : travel
                    })
                }).then(res => res.json())
                .then((res) => {
                    if(res.message == "email exists"){
						alert("email already exists")
						document.getElementById('signup1').style.display = "block";
						document.getElementById('signup2').style.display = "none";

					}
					else{
						alert('successfully registered');
						document.location = 'login.html';
					}
                })
  }



	</script>
</head>

<body onload="show()">
	<header id="header">
		<div class="container-fluid">

			<div id="logo" class="pull-left">
				<h1><a href="index.html" style="color: black">QAEngine</a></h1>
			</div>
			<nav id="nav-menu-container">
				<ul class="nav-menu">
					<li class="menu-active"><a href="index.html" style="color: black">Home</a></li>
					<li><a href="login.html" style="color: black">Log In</a></li>
				</ul>
			</nav>
		</div>
	</header><!-- #header -->

	<div class="limiter" id="signup1">
		<div class="container-login100">
			<div class="wrap-login100">
				<form class="login100-form validate-form p-l-55 p-r-55 p-t-178">
					<span class="login100-form-title">
						Sign Up
					</span>

					<div class="wrap-input100 validate-input m-b-16" data-validate="Please enter username">
						<input class="input100" type="text" name="username" id="name" placeholder="username">
						<span class="focus-input100"></span>
					</div>

					<div class="wrap-input100 validate-input m-b-16" data-validate="email should be of form name@gg.com">
						<input class="input100" type="text" name="email" id="email" placeholder="email">
						<span class="focus-input100"></span>
					</div>
					<div class="wrap-input100 validate-input m-b-16" data-validate="Please enter phone number">
						<input class="input100" type="number" maxlength="10" name="phone" id="phone" placeholder="contact number">
						<span class="focus-input100"></span>
					</div>
					<div class="wrap-input100 validate-input m-b-16" data-validate="Please select gender">
							<select class="input100" id="gender">
									<option value="--Gender--">--Gender--</option>
									<option value="male">Male</option>
									<option value="female">Female</option>
								</select>
							<span class="focus-input100"></span>
					</div>
					<div class="wrap-input100 validate-input m-b-16" data-validate="enter your DOB">
							<input class="input100" type="date" name="dob" id="dob" placeholder="date of birth">
							<span class="focus-input100"></span>
					</div>

					<label>Security Question:</label>
					<div class="wrap-input100 validate-input m-b-16" >
							
							<select class="input100" id="que">
								<option value='What was your childhood nickname?'>What was your childhood nickname?</option>
								<option value='What is your favorite team?'>What is your favorite team?</option>
								<option value='What was your favorite food as a child?'>What was your favorite food as a child?</option>
								<option value='In what town was your first job?'>In what town was your first job?</option>
                    			</select>
							<span class="focus-input100"></span>
					</div>
					<label>Security answer:</label>
					<div class="wrap-input100 validate-input m-b-16" data-validate="enter your response">
							<input class="input100" type="text" name="ans" id="ans" placeholder="your response">
							<span class="focus-input100"></span>
					</div>


					<div class="wrap-input100 validate-input m-b-16" data-validate="password should contain atleast 1 uppercase, 1 lowercase, 1 special character, 1 number and should be 8 characters long">
						<input class="input100" type="password" name="pass" id="pass" placeholder="Password">
						<span class="focus-input100"></span>
					</div>

					<div class="wrap-input100 validate-input m-b-16" data-validate="Please confirm password">
							<input class="input100" type="password" name="cpass" id="cpass" placeholder="confirm Password" onkeyup="validatepass()">
							<span class="focus-input100"></span>
					</div>

					<div class="wrap-input100 validate-input" data-validate="Please enter password">
						<span class="focus-input100" style="color: red" id="message"></span>
					</div>
					
					<br><br>
					

					<div class="container-login100-form-btn">
						<input type="button" class="login100-form-btn" value="Next ->" onclick="next()">
					</div>

					
				</form><br><br>
			</div>
		</div>
	</div>

	<!-- ....................................................................................................... -->
	<div class="limiter" id="signup2" style="display: none">
			<div class="container-login100">
				<div class="wrap-login100">
					<form class="login100-form validate-form p-l-55 p-r-55 p-t-178" >
						<span class="login100-form-title">
							One last Step
						</span>
							<label for="">choose your favorite cuisines: <br></label>
						<div class="wrap-input100 validate-input m-b-16" >
								
								<div class="form-check-inline">
										<label class="form-check-label">
												<input type="checkbox" value="continental" class="form-check-input" name="_check" > continental
										</label>
								</div>
								<div class="form-check-inline">
										<label class="form-check-label">
												<input type="checkbox" value="italian" class="form-check-input" name="_check" > italian
										</label>
								</div>
								<div class="form-check-inline">
										<label class="form-check-label">
												<input type="checkbox" value="north indian" class="form-check-input" name="_check" > North Indian
										</label>
								</div>
								<div class="form-check-inline">
										<label class="form-check-label">
												<input type="checkbox" value="south indian" class="form-check-input" name="_check" > South Indian
										</label>
								</div>
								<div class="form-check-inline">
										<label class="form-check-label">
												<input type="checkbox" value="chinese" class="form-check-input" name="_check" > Chinese
										</label>
								</div>
								<div class="form-check-inline">
										<label class="form-check-label">
												<input type="checkbox" value="mughlai" class="form-check-input" name="_check" > Mughlai
										</label>
								</div>
								
						</div>
						<label for="">choose your travel interests: <br></label>
						<div class="wrap-input100 validate-input m-b-16" >
								
								<div class="form-check-inline">
										<label class="form-check-label">
												<input type="checkbox" value="adventure" class="form-check-input" name="_travel" > Adventure
										</label>
								</div>
								<div class="form-check-inline">
										<label class="form-check-label">
												<input type="checkbox" value="cultural and historical" class="form-check-input" name="_travel" > Cultural and historical
										</label>
								</div>
								<div class="form-check-inline">
										<label class="form-check-label">
												<input type="checkbox" value="nature love" class="form-check-input" name="_travel" > nature love
										</label>
								</div>
								<div class="form-check-inline">
										<label class="form-check-label">
												<input type="checkbox" value="round the city" class="form-check-input" name="_travel" > round the city
										</label>		
						</div>
						
						
	                <br> <br>
						<div class="container-login100-form-btn">
							<input type="button" class="login100-form-btn" value="Sign Up" onclick="signup()">
						</div>
	
						
					</form><br><br>
				</div>
			</div>
		</div>
			  
	<!--===============================================================================================-->
	<script src="vendor/jquery/jquery-3.2.1.min.js"></script>
	<!--===============================================================================================-->
	<script src="vendor/animsition/js/animsition.min.js"></script>
	<!--===============================================================================================-->
	<script src="vendor/bootstrap/js/popper.js"></script>
	<script src="vendor/bootstrap/js/bootstrap.min.js"></script>
	<!--===============================================================================================-->
	<script src="vendor/select2/select2.min.js"></script>
	<!--===============================================================================================-->
	<script src="vendor/daterangepicker/moment.min.js"></script>
	<script src="vendor/daterangepicker/daterangepicker.js"></script>
	<!--===============================================================================================-->
	<script src="vendor/countdowntime/countdowntime.js"></script>
	<!--===============================================================================================-->
	<script src="js/main.js"></script>
	<script src="lib/jquery/jquery.min.js"></script>
	<script src="lib/jquery/jquery-migrate.min.js"></script>
	<script src="lib/bootstrap/js/bootstrap.bundle.min.js"></script>
	<script src="lib/easing/easing.min.js"></script>
	<script src="lib/superfish/hoverIntent.js"></script>
	<script src="lib/superfish/superfish.min.js"></script>
	<script src="lib/wow/wow.min.js"></script>
	<script src="lib/waypoints/waypoints.min.js"></script>
	<script src="lib/counterup/counterup.min.js"></script>
	<script src="lib/owlcarousel/owl.carousel.min.js"></script>
	<script src="lib/isotope/isotope.pkgd.min.js"></script>
	<script src="lib/lightbox/js/lightbox.min.js"></script>
	<script src="lib/touchSwipe/jquery.touchSwipe.min.js"></script>


</body>

</html>